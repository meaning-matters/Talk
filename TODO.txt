NEXT:
# Disable deletion of Phones when used in Settings, Destination and as Caller ID: do in all places PhoneVC and PhonesVC.
Perhaps move test code to common place.
# Place phone number type (iPhone, mobile, home, office, ...) as detail text under Contact name in above list.
# Update PhoneVC when a caller ID was assigned, it may need to be added to its list.
# Place only one can't delete Phone in the PhoneVC; one that summarizes the full condition(s).
# Add dummy Numbers and go through the VCs to see if all is working.
# When user taps cell of above list, show dialog "Do you want to call this contact?" "Call" / "Cancel".
# Implement swipe delete of the above cells.
*/


Make country list diacritic insensitive

* Check what happens when user switches SIM (e.g. BE -> NL).  Both when ReadFromSIM is on
  and off.  Integrate this behaviour with alerts given to user when he calls first local
  number.  Also find better place for code in viewWillAppear of SettingsViewController.

* Use special new textfield with format in DestinationVC.

* Zag "Nothing to Restore" terwijl er wel een account was.  Zijn er andere errors misschien die nu op een hoop
  worden geveegd?
  
* Zag dit, zonder ISO: postPath request: https://api.numberbay.com/users?currencyCode= 
  Was waarschijnlijk van niet wachten op loadProducts completion.

* Maak één grote Strings.m met daarin alle strings. Groepering onder Common, Provisioning, .... en dan functies
  provisioningInvalidNumberTitle:, met als key @"Privisioning:InvalidNumberTitle".
  
* Technical error: 32004?

* Check if Common checkCountryOfPhoneNumber is not broken by changes for CountriesVC zie breakpoint

* Create CountryTableCell that takes a iSO country code and use in SettingsVC and NumberAreaVC ...

* Test how currencyCode to #8B can be empty, right after provisioning.  Perhaps order problem with loading products?

* Make sure that credit & number purchases are handled correctly when they are pushed by App Store later, i.e.
  without the UI (for example at app kill/crash/error between payment OK, and processing on server).  The
  productCompletion will/should be nil then.

* Sort PurchaseManager methods in REST.txt order.

* Check what happens when notifications are off, buyAccount in PurchaseManager.

* Do all tables using http://stackoverflow.com/a/18418549/1971013

* Think about if it's really good to cancel the who buy VC when Store alert is cancelled, as is done now.

* Add PurchaseManager loadProducts to Number/Credit Buy, with error alerts and busy indication while loading. Or use
  notification sent by PurchaseMgr.

* In WebClient return NSError with webClientFail code and localized string, as id content (call it object?); in case of error.

* Rewrite WebClient status texts. localizedStringForStatus

* Add warning push notification from server when credit gets below tier 5.

* Order delegate methods in same way accross .m files (e.g. table view delegates).

* Place common methods (textfield & keyboard handling) between NumberAreaVC, NumberVC, DestinationsVC and others in super class.

* Implement Number[s]VC with NSFetchResultsController (see Destination[s]VC).

* Als #2 faalt, mislukt Restore silently: zorg dat er een melding komt. kijk ook na voor #1 e.d.

* als je nummer-koop cancelt wordt deze toegevoegd als pending!

* Differentiate between real WebClient network problem, and API problem.

* Introduce NumberArea object to encapsulate exceptions of fields yes/no present and other logic (e.g to/from JSON).

* Warn users about expiring numbers.  Warn when number has expired. (Warn user when synchronize from server returns less numbers.)

* "Validate" is deselected after Closing alert, in other parts of the UI the button is immediately deselected when there's an alert; make same

* Make sure all cancelAll WebClient methods are used when cancelling stuff in the UI or otherwise appropriately.

* Wait for Store products to have loaded, because otherwise Currency is not available, and #1 fails.

* Use NSError everywhere, instead of WebClientStatus values here and there.
* Use NSError's localizedRecoverySuggestion instead of "Please try again later."
* Do: [NSError errorWithDomain:FSMyAppErrorDomain code:FSProfileParsingFailedError userInfo:@{NSLocalizedDescriptionKey : FS_ERROR_LOCALIZED_DESCRIPTION(error.code)}]; –
  en haal message uit error met userInfo[NSLocalizedDescriptionKey];

* Use capitalized Destinations and Numbers, .... in texts?  currently use "Destinations" & "numbers" -> inconsistent

* Do simIsoCountryCode in Settings VC en elders. niet met ==/!= nil maar met length.

* Make NSString properties copy, instead of strong:http://stackoverflow.com/questions/387959/nsstring-property-copy-or-retain

* Make eigen NSLocalizedString met nil, [NSBunble mainBundle].

* Gebruik tijd bij bepalen of callback stop nog gedaan moet worden.  Nu komt er namelijk een alert als je NB pas veel later weer opent.

* Groot probleem in PurchaseManager zie "We can get here when app did not process purchase previous time ..."

* Check if "calling" label in CallbackVC is done on main thread; saw some delays in setting it.  Fixed things, but still no string at some point with every Callback call.

* NumberAreaViewController #834 do something with isValid!!!

* Kleur highlighted number op dialpad (copy/paste)

* Done button in Number info invullen (laatste veld) moet eigenlijk pas blauw worden als er iets is ingevuld

* Als je bij Germany number bijvoorbeeld een stad kiest, moet ie in lijst met zips eigenlijk naar goeie plek springen in lijst.

* App crasht zonder account op Credit tab, en als je belt

* na Restore is Caller ID niet ingevuld en crasht app bij aanmaken dictionary voor callback api message.

* add refreshControl to UITableViewController property, remove added delays from action methods.

* Kijk clearsSelectionOnViewWillAppear ff na in alle UITableVC's; eigen code to deselect kan weg denk ik.

* Create and use Common method +(NSString*)localizedError:(NSError*)error; that checks userInfo for NSLocalizedDescriptionKey, and if not there, create own description.  Because on sandbox I sometimes get : po error.localizedDescription
The operation couldn’t be completed. (SKErrorDomain error 0.) when can't load Store products.  But perhaps these things won't occur on real system.

* Keypad = US, Dialler = UK!

* Use UIactivitycontroller for Share.

* I switched off [Common checkRemoteNotifications] in PurchaseManager !HAS_BUYING_NUMBERS.  May want to check this when we start using notifications for missed calls for example (once we add incoming numbers).

* Add number virification API that break off the process: so stops calling. Then in app the <Phone back button can be
  enabled again and handled in UIVC's willMoveToParentViewController when parent == nil

* Do Number textFields allow editing halfway the string. When trying to do so, the cursor jumps to the end.  If not see ItemVC #240

* AppDelegate, is this the cause for unavailability of currencyCode sometimes at accoutn creation?    // When account purchase transaction has not been finished, the PurchaseManager receives
// it again at app startup.  This is however slightly earlier than that device token is
// received.  Therefore the PurchaseManager is started up here.

* Assign ivars in init and dealloc methods: https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html

* Make sub-UIViews weak properties: http://stackoverflow.com/questions/23076260/creating-views-programmatically-strong-vs-weak-subviews-in-controller

* Make code to check if Phone and Destination can be deleted (and deletion itself) the same and place more in XyzData module perhaps.

* Dismiss keyboards when tapping table and when scrolling down (possibly with swizzling in a viewDidLoad in UIViewController+Common).

* New datamodel (2.2 or something): RENAME Destination.statements --> Destination.action, DELETE Recording.urlString (because can be generated from uuid).

* Do something with NBLog(@"//### Received notification about address that's unknown to app."); AddressUpdatesHandler

* Disable Accessibility / "Dynamic Type" in app, and select one (or multiple in app Settings) font size for all standard cells.

* Replace observing all NSUserDefaultsDidChangeNotification with specific Settings property observers like:
    [[Settings sharedSettings] addObserver:self
                                forKeyPath:@"sortSegment"
                                   options:NSKeyValueObservingOptionNew
                                   context:nil];
  The app is refreshing too much at the moment (e.g. every tab change is saved in Defaults firing various table refreshes)

* Clean up (i.e. generalize: using one method instread of several slightly different ones) view controllers: The way that cells are deselected when coming back to view, the way tables are reloaded, the way table cells are recreated and filled with data.  Also doing a [super viewDidAppear] before accessing self.tableView.selectedCellIndexPath (or something), clears this variable, [super viewDidAppear] must be placed at the bottom of the method.

* Place Cancel button on HtmlViewController on right side (like New Phone/Number/Destination).

* Fix findContactsHavingNumber: Currently, only valid numbers are searched and only national part is compared. Also look at PhoneNumber:nationalDigits;

* Add feature: Find contact IDs for anonymous Recents numbers. See not used findContactsForAnonymousItems.  App crashed when trying something in this direction; similar crash as documented in one of the NBAddress modules (where I thought that synchonize would help)

* IdType.m Check entered data using regex's.

* Make whole app English: http://stackoverflow.com/q/1669645/1971013, avoid iOS language errors.

* New Address view has larger font for Proof Image's "Required" (UILabel?) than for Name's "Required" and all others (UITextField)

* New Address: Proof Image cell is not deselected after tapping -> it stays grey.

* Adding MBE London from Recents did not update the name in Recents list. Then after restarting app (and seeing the contact in Phone app), the recent still does not show MBE. But does show up as MBE on keypad. May need to rescan unknown Recents at app startup and Contacts update notification.

* Make Keypad past filtering more relaxed. I tried to paste a number copied from Phone app which had New Zealand in the text -> did not work, really annoying. Just strip of all non number characters including A-Z ...

* HK National has "---" as area code, better not show this. It also does not show area code on Number details.

* Move the many "Please try again later." to generic code. Also see if NSError's localizedRecoverySuggestion can be used.
  Also after managed to get iOS error messages in English always (see Dentsply app perhaps), some app error messages can be
  eliminated.

* Pass city through AddressesViewController to AddressViewController, to allow filling it in for LOCAL addresses.

* Add postcode checking using https://gist.github.com/matthewbednarski/4d15c7f50258b82e2d7e (saved as Postcodes.json in project) or other sources.

* SP Mobile ID number does not stay red when invalid when scrolling table view (i.e. refreshing cells).

* It would make sense to always ask for the extra fields also when address is not used for the same country as the
  Number. This would ensure that that address is immediately usable in case of buying a Number in that country (which is the most common case anyway).

* Don't show spinner on Credit when just showing page.

* Implement permanent badge when Credit si low.

* Contact don't seem to be loaded the first time a dialer nunber -> contact search is done.

* Touch to show footnotes does not work on Numbers Terms VC when touching between table groups. On other VCs it's fine.

* When an Address is selected for NumberArea, it's address cell is refreshed/flashed when returning from AddressVC.

* Check all viewDidLoad's (if they can be called multiple times) because they can be called multiple times in case view was unloaded for memory pressure.

* Make sure that rejected Addresses are not showing up in filtered list and that they are marked (red?) in the main list (strikethrough is already used in the filtered list to indicate waiting for verification).

* Replace viewDidDisappear with dealloc's in VC's that use this to cancel webAPI loads.

* Something seems to take too long when trying to make a call when credit is very low 0.05 for example.

* Check recents deletion: components.weekOfYear/month = -1; //### Does this work first week of the year?

* Common's topViewController is not used everywhere, but AppDelegate.appDelegate.tabBarController instead. Check this.

* Add geocoding http://dialcode.org/Europe/Netherlands/ with Voxbone queries and possibly with LibPhoneNumber's geocoding support.

* Limit number of times updateNumbersBadgeValue is called during background fetch. It's called for every Address at the moment.'

* After moving to iOS 10, delete NSTimer+Block module because iOS 10 has a block'ed method now.

* Lene's iPhone on FRIST install showed "Welcome back!" / "Nice to see you again at NumberBay!" and then does not start add Phone process. Well actually: seems correct because Lene's phone already there. The start process is unclear when you choose Start and then purchase.

* API requestion Addresses UUIDs seems to have `?` at end users/<...>/addresses?  While Phones does not have this `?`

* When calling just a country code "+353" for example, there's a <null>

* Recents may still get status of callbacks with null UUID.

* Recents: Show Number on Recent info. Help to determine why a call was missed.

* BUG: When on slow internet, e.g. Edge (via Developer iOS settings), and calling a contact from the keypad before the price was not retrieved yet, the keypad shows "(null) - 0.020", on return to the keypad when cancelling the call for example.  Apparently the answer comes after this keypad label was wiped, but the country and phone type were no longer available (because they were wiped).

* The width of textfields added to cells is fixed (at 224) which may allow the text to run under the textLabel on the left. The textfield width needs to be adjusted according to the textLabel on the left.

* App is sometimes without internet or in background. It then still generates Loading Products failed alerts. App should not generated alerts when in background.

* AppDelegate saveContext is no longer used, only in commented out contacts code.

* Check if main MananagedObjectContext is saved and not just the child, when creating objects. Perhaps put back saving in App Delegate (that was removed December 27 2016).

* Perhaps use PhoneNumber isPossible instead of isValid. Especially imporant when adding Phone, don't want to block people based on state of LibPhoneNumber.

* Check why Common addCountryImageToCell is only needed/used for NumberAreaVC.

* Check DB saves: synchronizeAll now saves the parent context, this is fine for new objects (like Phones) because they are created on a child context, but existing objects are changed on the parent context so a background syncAll may interfere. Perhaps it would be good to always create a child context when drilling down to object detail screens.

* Test Number expiration logic: A popup must be shown and everything related to the Number must be cleared away: E.g. default Caller ID must be reset, ...

* Eliminate addressType from API 8 (and 13 perhaps by calling 9 instead and passing result onwards).

* Check recent changes to server's Regulation values of Croatia, Austria, Denmark, France, Hungary, Norway, Peru.

* There's a dirty delay of 3 seconds in applicationDidBecomeActive to make sure contacts are loaded before we get recents. Otherwise Recents can't find contactIds and the calls shows are number instead of contact names. Make this cleaner!

* Refresh Credit from PurchaseManager's completeBuyWithSuccess and remove the alert text "(You may need to refresh your Credit to see the change.)".  Also have a look at mustShowLoadingError, perhaps add as parameter to loadCredit.

* CountriesViewController only needs `cancelled` incompletion if excluded country is supplied -> change completion of
  constructor that never has `cancelled` YES.

* When the termination to SP was broken (26 July 2017) this resulted in CDR status NORMAL_TEMPORARY_FAILURE. Incoming recents picks this up correctly, but callback does not. When doing a callback the call screen simply dismissed again a few seconds later without any warning/error and Recents showed "cancelled". Turns out that `retrieveCallbackStateForUuid` #34 does not seem to process the "callbackHangupCause" nor "callthruHangupCause". Also CallRecordData.m has an unused (and incorrect, returning non-existent values for errors) `callStatusForString` method. Task: Make sure that failures are picked up and shown in Recent.

* See NSRecentsListViewController.m:
    // ### Without this delay, the contact name does not appear when restarting the app right after a missed call.
    //     The contact name does appear after the incoming call has been hung up, but the after the app restart it's
    //     no longer showing up. It does however again when scrolling the table up and, forcing that cell to reload.
    //     It's strange that doing a reloadData immediately does not work, while after a short delay it does.

* A new missed call from same contact minutes later, is not always combined in Recents. This occurs when the app is restarted or returns from background I believe.

* Really fix temporary patch in NBPeopleViewController.m for crash https://rink.hockeyapp.net/manage/apps/35762/app_versions/128/crash_reasons/189969838
(Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndexedSubscript:]: index 636 beyond bounds [0 .. 635]')

* Fix and enable Settings > Show Footnotes for iOS 11.

* Date format on Recent Info screen is too long when device language is not English (Spanish for example: "12 de octubre 2..."). Should do short/digits date format!

* Failed calls show up as missed calls.

